{
  "name": "Kaniu WebApp",
  "description": "Sistema de gestão de abrigos de animais com Next.js e Supabase",
  "version": "2.0.0",
  "services": [
    {
      "name": "app",
      "type": "app",
      "source": {
        "type": "git",
        "repository": "https://github.com/jarbasaraujojr/kaniu-webapp",
        "branch": "main",
        "buildMethod": "dockerfile",
        "dockerfilePath": "Dockerfile"
      },
      "config": {
        "port": 3000,
        "healthcheck": {
          "path": "/",
          "interval": 30,
          "timeout": 10,
          "retries": 3
        }
      },
      "env": [
        {
          "name": "NODE_ENV",
          "value": "production",
          "description": "Node.js environment"
        },
        {
          "name": "DATABASE_URL",
          "value": "postgresql://postgres:[YOUR-PASSWORD]@db.[YOUR-PROJECT-REF].supabase.co:5432/postgres",
          "description": "Supabase connection string - Get from: Supabase Dashboard > Project Settings > Database > Connection String (URI)"
        },
        {
          "name": "NEXTAUTH_URL",
          "value": "https://your-domain.com",
          "description": "Your application URL with HTTPS"
        },
        {
          "name": "NEXTAUTH_SECRET",
          "value": "CHANGE_THIS_SECRET",
          "description": "Generate with: openssl rand -base64 32"
        },
        {
          "name": "GOOGLE_CLIENT_ID",
          "value": "",
          "description": "Google OAuth Client ID (optional)"
        },
        {
          "name": "GOOGLE_CLIENT_SECRET",
          "value": "",
          "description": "Google OAuth Client Secret (optional)"
        },
        {
          "name": "NEXT_PUBLIC_CLOUDINARY_CLOUD_NAME",
          "value": "",
          "description": "Cloudinary cloud name (optional)"
        },
        {
          "name": "CLOUDINARY_API_KEY",
          "value": "",
          "description": "Cloudinary API key (optional)"
        },
        {
          "name": "CLOUDINARY_API_SECRET",
          "value": "",
          "description": "Cloudinary API secret (optional)"
        },
        {
          "name": "RESEND_API_KEY",
          "value": "",
          "description": "Resend API key for emails (optional)"
        },
        {
          "name": "EMAIL_FROM",
          "value": "noreply@your-domain.com",
          "description": "Email sender address"
        }
      ],
      "domains": [
        {
          "domain": "your-domain.com",
          "ssl": true,
          "forceHttps": true
        }
      ],
      "deploy": {
        "autoDeploy": true,
        "command": "sh -c \"npx prisma migrate deploy && node server.js\""
      },
      "resources": {
        "memory": "1Gi",
        "cpu": "1"
      },
      "scaling": {
        "min": 1,
        "max": 3
      }
    }
  ],
  "instructions": {
    "preInstall": [
      "1. Configure seu projeto Supabase em https://supabase.com",
      "2. Copie a connection string do Supabase: Dashboard > Project Settings > Database > Connection String (URI)",
      "3. Gere um NEXTAUTH_SECRET forte usando: openssl rand -base64 32",
      "4. Configure seu domínio no campo 'domains'",
      "5. Atualize o NEXTAUTH_URL com seu domínio",
      "6. (Opcional) Configure as variáveis de terceiros (Google, Cloudinary, Resend)"
    ],
    "postInstall": [
      "1. Aguarde o build da aplicação (pode levar 2-3 minutos)",
      "2. Verifique os logs para garantir que não há erros",
      "3. As migrations do Prisma serão executadas automaticamente no Supabase",
      "4. Acesse sua aplicação pelo domínio configurado",
      "5. O backup do banco de dados é gerenciado automaticamente pelo Supabase"
    ],
    "notes": [
      "Este template usa Supabase como banco de dados PostgreSQL gerenciado",
      "Não é necessário instalar PostgreSQL no VPS",
      "Supabase oferece 500MB grátis de database storage",
      "Backups são automáticos no Supabase"
    ]
  },
  "tags": [
    "nextjs",
    "supabase",
    "postgresql",
    "typescript",
    "prisma",
    "animal-shelter",
    "adoption",
    "easypanel"
  ],
  "requirements": {
    "external": {
      "supabase": {
        "description": "Supabase project for PostgreSQL database",
        "url": "https://supabase.com",
        "plan": "Free tier available (500MB storage, 2GB bandwidth)",
        "setup": "Create a project and copy the connection string"
      }
    },
    "vps": {
      "minMemory": "1GB",
      "recommendedMemory": "2GB",
      "minDisk": "10GB",
      "recommendedDisk": "20GB"
    }
  }
}
